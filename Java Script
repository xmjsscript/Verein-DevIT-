Платформа Google Карт
Платформа карт
документация
Более
Обзор
Продукты
Цены
Блог
Сообщество
Поиск
/

немецкий

Интернет
API JavaScript Карт
Первые шаги
Контактный отдел продаж
Путеводители
ссылка
Примеры
Поддерживать
фильтр

Новая версия облачных картографических функций скоро будет доступна на платформе Google Maps. Обновление включает в себя новый цветовой шаблон по умолчанию и оптимизацию для удобства использования. Все стили карт будут автоматически обновлены в марте 2025 г. Дополнительную информацию о доступности и активации можно найти в разделе « Новый стиль карты для платформы Google Maps» .
Домашняя страница
Продукты
Платформа Google Карт
документация
Интернет
API JavaScript Карт
Было ли это полезно?

Оставьте отзывСервис «Геокодирование» 

bookmark_border
Примечание о серверных библиотеках
Обзор
Также см. справочник Maps JavaScript API для сервиса Geocoder .

Геокодирование преобразует такие адреса, как «1600 Amphitheatre Parkway, Mountain View, CA, USA» в географические координаты (37,423021 широты и -122,083739 долготы) . Затем вы можете использовать эти координаты для установки маркеров или расположения карты.

Обратное геокодирование преобразует географические координаты в удобочитаемый адрес. Дополнительную информацию см. в разделе Обратное геокодирование (поиск адреса) .

Вы также можете использовать геокодер, чтобы найти адрес по определенному идентификатору местоположения .

API JavaScript Карт предоставляет класс Geocoder для динамического геокодирования и динамического обратного геокодирования на основе пользовательского ввода. Если вместо этого вы хотите геокодировать статические известные адреса, вы можете использовать веб-сервис геокодирования .

Первые шаги
Прежде чем вы сможете использовать службу геокодирования в Maps JavaScript API, вам необходимо включить Geocoding API в Google Cloud Console в проекте, который вы настроили для Maps JavaScript API.

Чтобы открыть список включенных API:

Перейдите в облачную консоль Google .
Нажмите кнопку «Выбрать проект» , выберите проект, который вы настроили для Maps JavaScript API, а затем нажмите «Открыть» .
На панели управления найдите Geocoding API в списке API .
Если API появится в списке, вам больше ничего делать не нужно. Если API нет в списке, включите его:
Выберите ВКЛЮЧИТЬ API вверху страницы, чтобы получить доступ к вкладке «Библиотека» . У вас также есть возможность выбрать «Библиотека» в меню слева .
Найдите API геокодирования , а затем выберите его в списке результатов.
Нажмите АКТИВИРОВАТЬ . API геокодирования появится в списке API на информационной панели .
Ценообразование и политика
Цены
С 16 июля 2018 года для карт, маршрутов и мест действует новая модель ценообразования, ориентированная на использование (оплата по мере использования). Дополнительные сведения о текущих ценах и ограничениях на использование службы геокодирования JavaScript см. в разделе « Использование API геокодирования и выставление счетов» .

Рекомендации
Использование службы геокодирования должно соответствовать рекомендациям API геокодирования .

Запросы геокодирования
Доступ к сервису геокодирования асинхронный, так как для этого требуется вызов внешнего сервера через API Google Maps. Поэтому необходимо передать метод обратного вызова , который будет выполнен после завершения запроса. Затем результат обрабатывается с помощью метода обратного вызова. Через геокодер может быть возвращено несколько результатов.

google.maps.GeocoderВы можете получить доступ к службе геокодирования Google Maps API из своего кода через объект-конструктор. Метод Geocoder.geocode()инициирует запрос к службе геокодирования. Это делается путем передачи GeocoderRequestлитерала объекта, содержащего входные условия, и метода обратного вызова, который будет выполнен после получения ответа.

Литерал объекта GeocoderRequestсодержит следующие поля:


{
 address: string,
 location: LatLng,
 placeId: string,
 bounds: LatLngBounds,
 componentRestrictions: GeocoderComponentRestrictions,
 region: string
}
Обязательные параметры : необходимо указать ровно одно из следующих полей:

address: адрес, который вы хотите геокодировать
     , или
location : LatLngэлемент (или LatLngLiteralэлементы), для которого ближайший адрес выводится в удобочитаемой форме. Геокодер выполняет обратное геокодирование . Дополнительные сведения об обратном геокодировании
     или
placeId : идентификатор местоположения, для которого вы хотите вывести ближайший адрес в удобочитаемой форме. Узнайте больше о том, как получить адрес для идентификатора местоположения.
Дополнительные параметры:

bounds: LatLngBoundsзначение, в пределах которого результаты геокодирования должны быть предпочтительными. Параметр boundsвлияет на результаты геокодера, но не ограничивает их полностью. Дополнительную информацию о взвешивании области просмотра см. ниже.
componentRestrictions: используется для сужения результатов до определенной области. Дополнительную информацию о компонентах фильтрации см. ниже.
region: код региона, указанный в виде двузначного (нечислового) субтега Юникода для регионов. В большинстве случаев эти теги напрямую соответствуют двузначному коду страны домена верхнего уровня (ccTLD). Параметр regionвлияет на результаты геокодера, но не ограничивает их полностью. Дополнительную информацию о взвешивании по коду региона см. ниже.
Геокодирование ответов
Службе геокодирования требуется метод обратного вызова, который запускается после получения результатов геокодирования. Этот обратный вызов должен передать два параметра, содержащие results- и status-код, в указанном порядке.

Результаты геокодирования
Объект GeocoderResultпредставляет собой один результат геокодирования. Запрос геокодирования может возвращать несколько объектов результата:


results[]: {
 types[]: string,
 formatted_address: string,
 address_components[]: {
   short_name: string,
   long_name: string,
   postcode_localities[]: string,
   types[]: string
 },
 partial_match: boolean,
 place_id: string,
 postcode_localities[]: string,
 geometry: {
   location: LatLng,
   location_type: GeocoderLocationType
   viewport: LatLngBounds,
   bounds: LatLngBounds
 }
}
Эти поля описаны ниже:

types[]— это массив, указывающий тип адреса возвращаемого результата. Этот массив содержит строку с нулем или более тегами, используемыми для определения типа элемента, возвращаемого в результате. Например, при запросе геокода для Чикаго: Например, с одной стороны, он возвращает элемент типа «локальность», что означает, что Чикаго — это город, а с другой стороны, он также возвращает элемент «политический», что означает, что Чикаго — политическое образование. Дополнительную информацию о типах адресов и компонентах адреса см. ниже.
formatted_address— строка, содержащая адрес этого местоположения в удобочитаемой форме.
Этот адрес часто совпадает с почтовым адресом. В некоторых странах, напр. В некоторых странах, например в Великобритании, совместное использование реальных почтовых адресов запрещено из-за лицензионных ограничений.

Форматированный адрес состоит из одного или нескольких компонентов адреса . Адрес «111 8th Avenue, New York, NY», например. Например, из следующих компонентов: «111» (номер дома), «8th Avenue» (улица), «New York» (город) и «NY» (штат США).

Мы не рекомендуем анализировать отформатированный адрес программно. Вместо этого используйте отдельные компоненты адреса, включенные в ответ API, в дополнение к форматированному адресу.

address_components[]представляет собой массив, содержащий отдельные компоненты для этого адреса.

Каждый компонент адреса обычно содержит следующие поля:

types[]— это массив, указывающий тип компонента адреса. Просмотрите список поддерживаемых типов .
long_name— полнотекстовое описание или имя компонента адреса, возвращаемое геокодером.
short_name— это сокращенное текстовое имя компонента адреса, если он присутствует. Например, компонент адреса для американского штата Аляска может содержать long_name«Аляска» и short_name«АК», соответствующие почтовому сокращению.
Примечания к address_components[]массиву:

Массив компонентов адреса может formatted_addressсодержать больше компонентов, чем просто.
Массив не обязательно содержит все политические единицы адреса. Исключением являются те, которые formatted_addressвключены. Если вы хотите получить все политические образования, принадлежащие определенному адресу, вы должны использовать обратное геокодирование. Широта/долгота адреса передается в качестве параметра запроса.
Нет никакой гарантии, что формат ответа останется неизменным между несколькими запросами. В частности, количество address_componentsварьируется в зависимости от запрашиваемого адреса и может меняться со временем для одного и того же адреса. Положение компонента в массиве может измениться. Тип компонента также может измениться. Определенный компонент также может отсутствовать в более позднем запросе.
Дополнительную информацию о типах адресов и компонентах адреса см. ниже.

partial_matchуказывает, что геокодер не вернул точное соответствие исходному запросу, хотя ему удалось сопоставить часть запрошенного адреса. Мы рекомендуем проверить исходный запрос на наличие опечаток и/или полноты.

Частичные совпадения чаще всего возникают для адресов, которые не существуют в местоположении, переданном в запросе. Они также могут быть возвращены, если запрос соответствует нескольким адресам в одном месте. Если запрашивается «Henr St, Bristol, UK», например. Б. вернул частичное совпадение для Генри-стрит и Генриетты-стрит. Если запрос содержит компонент адреса с опечаткой, служба геокодирования может предложить другой адрес. Такие предложения также отмечаются как частичное согласие.

place_id – это уникальный идентификатор местоположения, который можно использовать с другими API Google. Вы можете, например. Например, вы можете использовать place_idбиблиотеку API Google Адресов, чтобы получить подробную информацию о местной компании, такую ​​как номер телефона, часы работы или отзывы пользователей. Дополнительную информацию см. в обзоре идентификатора местоположения .
postcode_localities[]— это массив, включающий все местоположения, принадлежащие почтовому индексу. Этот элемент присутствует только в том случае, если результатом является почтовый индекс, включающий несколько местоположений.
geometryсодержит следующую информацию:

locationсодержит геокодированные значения широты и долготы. Соответствующее местоположение LatLngвозвращается как объект, а не как форматированная строка.
location_typeсодержит дополнительные данные об указанном местоположении. На данный момент поддерживаются следующие значения:
ROOFTOPуказывает на то, что возвращенный результат может быть точно геокодирован.
RANGE_INTERPOLATEDуказывает, что возвращаемый результат представляет собой оценку (обычно для дороги), интерполированную на основе двух точных точек (например, перекрестков). Интерполированные результаты обычно возвращаются, когда точное геокодирование адреса невозможно.
GEOMETRIC_CENTERуказывает, что возвращаемый результат является геометрическим центром результата, такого как Б. ломаная линия (например, дорога) или многоугольник (регион).
APPROXIMATEуказывает, что возвращаемый результат является приблизительным.

viewportуказывает рекомендуемую область просмотра для возвращаемого результата.
bounds(необязательно) содержит LatLngBoundsзначение, которое может полностью включать возвращаемый результат. Указанные пределы могут не соответствовать рекомендуемому области просмотра. Сан-Франциско включает, например, Б. Фараллонские острова , которые официально являются частью города, но не должны быть возвращены в иллюминатор.
languageАдреса возвращаются геокодером на языке, установленном в браузере, или на языке, указанном вами в параметре при загрузке JavaScript-кода API . Дополнительную информацию см. в разделе Локализация .

Типы адресов и компоненты адреса
Массив types[]в GeocoderResult определяет тип адреса . Массив types[]также может быть возвращен внутри GeocoderAddressComponent , указывая тип каждого компонента адреса. Адреса, возвращаемые геокодером, могут включать несколько типов, которые можно считать тегами. Во многих городах есть, например. Б. Теги типа politicalи locality.

Следующие типы поддерживаются и возвращаются геокодером как типы адресов, так и компоненты адреса:

street_addressдает точный адрес.
routeуказывает улицу с названием, например. Б. «Б1».
intersectionуказывает на крупный перекресток, обычно двух главных улиц.
politicalуказывает на политическую единицу. Этот тип обычно представляет собой многоугольник общественного объекта.
countryуказывает на государственную политическую единицу (страну) и обычно является типом с самым высоким рейтингом, возвращаемым геокодером.
administrative_area_level_1указывает на уровень государственной административной единицы на 1 ниже уровня штата. В США такими административными уровнями являются, например, Б. Штаты. Эти административные уровни существуют не во всех странах. В большинстве случаев сокращения этого типа тесно связаны с подразделами стандарта ISO 3166-2 и другими распространенными определениями. Однако мы не можем гарантировать это, поскольку наши результаты геокодирования основаны на различных сигналах и данных о местоположении.
administrative_area_level_2указывает на государственную административную единицу на 2 уровня ниже уровня штата. В США такими административными уровнями являются, например, Б. округа. Эти административные уровни существуют не во всех странах.
administrative_area_level_3указывает на государственную административную единицу на 3 уровня ниже уровня штата. Этот тип представляет собой небольшую административную единицу меньшего значения. Эти административные уровни существуют не во всех странах.
administrative_area_level_4указывает на государственную административную единицу на 4 уровня ниже уровня штата. Этот тип представляет собой небольшую административную единицу меньшего значения. Эти административные уровни существуют не во всех странах.
administrative_area_level_5указывает на государственную административную единицу на 5 уровней ниже уровня штата. Этот тип представляет собой небольшую административную единицу меньшего значения. Эти административные уровни существуют не во всех странах.
administrative_area_level_6указывает на государственную административную единицу на 6 уровней ниже уровня штата. Этот тип представляет собой небольшую административную единицу меньшего значения. Эти административные уровни существуют не во всех странах.
administrative_area_level_7указывает на государственную административную единицу на 7 уровней ниже уровня штата. Этот тип представляет собой небольшую административную единицу меньшего значения. Эти административные уровни существуют не во всех странах.
colloquial_areaдает общее альтернативное имя для устройства.
localityуказывает на политическую единицу города или муниципалитета.
sublocalityуказывает на государственную административную единицу на один уровень ниже города. Для некоторых мест может быть выдан один из следующих дополнительных типов: sublocality_level_1to sublocality_level_5. Каждый из этих уровней соответствует административной единице. Чем выше число, тем меньше географическая область.
neighborhoodуказывает на названный район.
premiseуказывает на названное место, обычно это здание или комплекс зданий с общим названием.
subpremiseуказывает на основную единицу ниже уровня именованного места, обычно это одно здание в комплексе зданий с общим названием.
plus_codeдает закодированную ссылку на местоположение, которую можно получить из широты и долготы. Плюс-коды можно использовать в качестве замены адресов, когда адреса не существуют, например. Б. когда у зданий нет номеров домов или улиц нет названий. Для получения дополнительной информации посетите https://plus.codes .
postal_codeуказывает почтовый индекс, используемый для отправки почты внутри страны.
natural_featureуказывает на поразительную особенность ландшафта.
airportуказывает на аэропорт.
parkуказывает на именованный парк.
point_of_interestуказывает именованный POI. Обычно эти POI представляют собой хорошо известные локальные объекты, которые нельзя отнести к какой-либо другой категории, например. Б. Бранденбургские ворота или Эйфелева башня.
Пустой список типов означает, что для определенного компонента адреса нет типов, например: Б. лейтенант во Франции.

Кроме того, компоненты адреса могут включать следующие типы.
